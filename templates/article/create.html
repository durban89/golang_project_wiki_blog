{{ define "title" }}
新建 - Article - Wiki
{{ end }}

{{ define "before_link" }}
{{ end }}

{{ define "after_link" }}
<link rel="stylesheet" href="/static/bower_components/editor.md/css/editormd.min.css" />
<link rel="stylesheet" href="/static/bootstrap-select/bootstrap-select.min.css" />
<link rel="stylesheet" href="/static/tagsinput/jquery.tagsinput.min.css" />
<link rel="stylesheet" href="/static/css/main.css" />
{{ end }}

{{ define "content" }}
<div class="container">
  <div class="col-md-12">
    <div class="text-center">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item" aria-current="page"><a href='/'>Home</a></li>
          <li class="breadcrumb-item" aria-current="page"><a href='/articles'>Articles</a></li>
          <li class="breadcrumb-item active" aria-current="page">新建文章</li>
        </ol>
      </nav>
    </div>
    {{ if .Msg }}
    <div class="row">
      <div class="col-md-12">
        <div class="alert alert-danger">
        {{ .Msg }}
        </div>
      </div>
    </div>
    {{ end }}
    <div>
      <form method="POST" action="/articles/save/">
        <div class="form-group">
          <label for="title">标题</label>
          <input type="text" name="title" class="form-control" id="title" placeholder="输入文章标题" value="" />
        </div>

        <div class="form-group">
          <label for="title">创建时间</label>
          <input type="text" name="created_at" class="form-control" id="created_at" placeholder="创建时间" value="{{ .Time }}" />
        </div>
        
        <div class="form-group">
          <label for="content">概述</label>
          <div>
            <textarea class="form-control" id="summary" name="summary" rows="3"></textarea>
          </div>
        </div>

        <div class="form-group">
          <label for="content">内容</label>
          <div id="editormd">
            <textarea class="form-control" id="content" name="content" rows="3" style="display: none"></textarea>
          </div>
        </div>

        <div class="form-group">
          <label for="category">分类</label>
          <select class="form-control" id="category_id" name="category_id">
            {{range .Cate}}
            <option value="{{ .autokid }}">{{ .name }}</option>
            {{ end }}
          </select>

        </div>

        <div class="form-group">
          <label for="category">标签</label>
          <input type="text" name="tags" id="tags" class="form-control" id="tag" placeholder="输入标签" value="">
        </div>

        <button type="submit" class="btn btn-primary mb-2">提交</button>
      </form>
      
    </div>
  </div>
</div>
{{ end }}

{{ define "before_script" }}
{{ end }}

{{ define "after_script" }}
<script src="/static/bower_components/editor.md/editormd.min.js"></script>
<script src="/static/bootstrap-select/bootstrap-select.min.js"></script>
<script src="/static/tagsinput/jquery.tagsinput.min.js"></script>
<script src="/static/bootstrap-select/defaults-zh_CN.min.js"></script>
<script type="text/javascript">
  $.fn.selectpicker.Constructor.BootstrapVersion = '4';


  $('#category_id').selectpicker();

  $('#tags').tagsInput();

  var contentEditor;
  $(() => {
    contentEditor = editormd('editormd', {
      placeholder: '键入要输入的内容',
      width: '100%',
      height: 440,
      syncScrolling: 'single',
      emoji: true,
      path: '/static/bower_components/editor.md/lib/',
    });
  });
</script>
{{ end }}

{{ template "layout.html" .}}